# 설계 원리와 구조적 설계

## 설계와 분석

* 분석
    * what - 요구, 성능, 환경, 유저 타입
    * 결과물은 SRS

* 설계
    * how - 컴포넌트, 구조, UI, DB
    * 결과물은 SDS

## 설계

* 아키텍처는 상위 수준의 설계이며 시스템의 컴포넌트와 이들의 커넥션에 초점
* 상세 설계는 코드에 더 가까운 수준, 즉 객체, 클래스, 알고리즘, 변수들을 관찰
* 상위 수준의 설계와 하위 수준의 설계 작업의 차이가 애매할 수도 있으나 동일한 원리가 적용됨

### 좋은 설계는?

* 설계를 움직이는 힘은 복잡성 컨트롤
* 모든 소프트웨어 설계 기술의 목표는 복잡한 문제를 단순한 조각으로 자르는 것
* 성능을 높이는 열쇠는 복잡한 예외처리가 아니라 간결함

### 설계의 목표

1. 복잡성 최소
2. **느슨한 결합**
3. **강한 응집력**
4. 확장성
5. 재사용성
6. 유지보수성
7. 유연성

### 설계 원리

#### 추상화의 원리

* 복잡한 문제 -> 추상화 -> 개념
* 소프트웨어 구조를 이루는 계층의 파악
* 기능 추상화
    * 입력 자료를 출력 자료로 변환하는 과정을 추상화
    * 부프로그램의 시그니처와 기능만 생각
* 자료 추상화
    * 자료와 기능을 묶어서 생각
* 제어 추상화
    * 외부 이벤트에 대한 반응을 추상화

#### 정보 은닉

* 각 모듈의 자세한 처리 내용이 시스템의 다른 부분으로부터 감추어져 있어야 함
* 각 모듈이 다른 모듈에 구애받지 않고 설계
* 인터페이스가 모듈 안의 구체적 사항을 최소로 반영
    * 전역변수가 없어야 함
* 모듈 단위의 수정, 시험, 유지보수에 큰 장점
    * 모듈 설계 평가에 기초

#### 단계적 분해

* 기능을 최대한으로 뗴어내어 생각
* 점차적으로 구체화
* 상세한 내역(알고리즘, 자료구조)는 가능한 뒤로 미룸

#### 모듈화

* 시스템의 분해를 어떻게 할 것인가?
* 한 모듈의 규모
* 이식성
* 모듈의 응집력이 높게
* 모둘 간의 결합력은 약하게

## 구조적 설계

* 시스템을 이루는 모듈의 구조를 파악하는 방법
* 모둘 분해의 계층적, 인터페이스 지향적 접근

### 시스템 구조도(structure chart)의 도출

![시스템 구조도](https://i.ytimg.com/vi/QN2bjNplGlQ/maxresdefault.jpg)

* 시스템을 모듈 단위로 분할
* 모듈의 계층적 구성
* 모듈 사이의 입출력 인터페이스
* 모듈의 이름과 기능

### 시스템 구조도 기호

![시스템 구조도 기호](https://slideplayer.com/slide/6854804/23/images/13/Basic+symbols+for+structure+charts.jpg)

### 변환 분석

* 자료의 변환 흐름(transformation chart)
    1. DFD에서 입력 자료 흐름과 출력 자료 흐름을 파악
    2. 중앙 변환 부분을 식별
    3. 변환 중심부를 축으로 최상위 구조 작성
    4. 각 모듈의 하위 구조도 같은 방법으로 분석
    5. 설계 기준을 적용하여 수정, 최적화

### 처리 분석

* 자료흐름도의 한 프로세스에서 여러 개의 자료 흐름이 유출되는 것

## 설계 평가 기준

* 모듈의 크기
    * 소규모 : 함수, 서브루틴
    * 대규모 시스템 : 독립 프로그램

* 모듈 응집력
    * 모듈 안의 요소들이 강한 응집력을 갖도록 설계

* 모듈 결합도
    * 다른 모듈과의 결합도가 약한 모듈이 되도록 설계

* 설계 요령

### 모듈 응집력

* 모듈 안의 구성 요소들이 공동의 목적을 달성하기 위하여 관련되어 있는 정도

* 목표
    * 한 모듈이 단일 기능을 갖도록 설계

#### 응집력의 단계

1. functional : 모듈의 기능이 한 문장으로 떨어짐
    * 판매세금 계산
2. sequential : 작업의 결과가 다른 작업의 입력
    * 거래를 읽고 마스터 파일을 받기
3. communicational : 동일한 입력과 출력을 사용하는 작업의 모임(순서는 상관 없음)
    * 출력화일을 출력하고 저장
4. procedural : 같은 범주에 속하는 일들이 순차적으로 수행
    * 총계를 출력하고 화면을 지우고 메뉴를 뿌리고 메뉴 선택을 받음
5. temporal : 프로그램 초기화
6. logical : 유사한 성격의 작업을 한 모듈로 모음
    * 수학적 계산 함수들의 라이브러리
7. coincidential : 아무 관련 없는 작업을 한 모듈로 모음

* 적어도 4번까지의 응집도는 가져야 함

### 모듈 결합도

* 모듈 간의 관련 정도 : 낮을수록 좋음

#### 결합의 단계

1. data coupling : 모듈들이 간단한 변수를 파라미터로 교환
2. stamp couping : 모듈 사이에 nonglobal 자료 구조를 교환
3. control couping : 제어용 신호(flag)를 주고 받음
4. common coupling : 전역 변수 사용
5. content coupling : 다른 모듈 내부의 변수를 변경 가능

* 4, 5번의 결합도는 피해야 함

## 설계 요령

* 최상의 모듈의 결합은 줄이고 응집은 높이도록 최대한 노력
* high fan-out(어떤 모듈이 호출하는 모듈의 수)은 줄이도록 노력
    * fan-out : 어떤 모듈이 호출하는 모듈의 수, 낮을수록 좋음
    * fan-in : 다른 모듈에서 자신을 호출하는 수, 높을수록 좋음
* 양파 모양의 구조가 일반적
    1. 취상위 모듈은 높은 응집도, 낮은 결합도로 수가 적음
    2. 중간 단게 모듈은 fan-out이 많아서 수가 많음
    3. 말단의 모듈은 fan-in으로 인해 수가 적음
    4. 단, 깊이가 너무 깊어도 좋지 않음(깊다는 것은 특정 모듈이 불규칙적으로 깊이가 너무 깊다는 뜻)
* 모듈의 영향권을 그 모듈의 하위에 두는 것이 좋은 설계
