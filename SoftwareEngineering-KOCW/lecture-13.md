# UML 코딩의 이해

## 코딩 단계

* 각 모듈에 대한 원시코드를 작성하고 모듈 안에 포함된 오류를 검출하는 단계

### 코딩 원칙

* 설계를 철저히 반영시킨다.
* 원시코드는 간단 명료하도록 한다.
* 디버깅이 쉽게 만든다.
* 테스트 용이하도록 만든다.
* 수정이 간단하도록 만든다.
* 상반되는 원칙을 잘 조화시켜야 한다. (e.g. 퍼포먼스와 가독성)

## 프로그래밍 원리

### 코딩

* 분리하여 구현할 수 있는 작은 단위를 프로그래밍하는 작업

### 코딩의 목표

* 설계 명세에 나타낸 요구를 만족하는 프로그램을 작성(요구분석서, 아키텍처 설계서 참조)
* 오류가 적은 품질 좋은 프로그램 작성(원리와 가이드 준수)

## 코딩 오류

* 오류를 피하기 위하여 오류 타입을 잘 알고 있어야 함

* 메모리 누수 : 메모리가 프리되지 않고 프로그램에 계속 할당되는 현상

```c
char* foo(int s) {
    char* output;
    if (s > 0) {
        ouput = (char*) malloc(size);
    }
    if (s == 1) {
        return NULL;  // memory leaked
    }
    return(output);
}
```

* 중복된 프리 선언 : 이미 프리로 소멸된 자원을 또 다시 프리로 선언하는 경우

```c
void main() {
    char* str;
    str = (char*) malloc(10);
    if (global == 0) {
        free(str);
    }
    free(str);
}
```

* dangling pointer 사용

* 별칭의 남용 : 서로 다른 주소값을 예상하고 사용한 두 변수가 alias로 선언된 경우

* 배열 인덱스 오류

* 수식 예외 오류

* 하나 차이에 의한 오류

* 사용자 정의 자료형 오류

* 스트링 처리 오류

* 버퍼 오류 : 버퍼 오류 시 리턴 주소가 반환되는 것을 이용하여 해킹에 이용할 수 있음

```c
void mygets(char* str) {
    int ch;
    // 이하 생략
}

void main() {
    char s2[4];
    mygets[s2];  // 오버플로 가능
}
```

* 동기화 오류

* 데드락 : 다수의 스레드가 서로 자원을 공유하고 릴리스하지 않는 상태

* 레이스 컨디션

* 모순 있는 동기화

## 구조적 프로그래밍

* 프로그램의 제어흐름을 선형화시켜 논리구조가 명백하게 하려는 코딩 규율

### tips

* 순차, 선택, 반복만 사용하고 무조건 goto는 사용하지 않는다.
* 제어구조를 하향식으로 만든다.
* stepwise refinement를 이용한 프로그래밍

### proper program

* 단일입구, 단일출구
* 모든 노드는 입구에서 도달할 수 있는 경로가 있어야
* 모든 노드는 출구까지 도달할 수 있는 경로가 있어야

## 정보 은닉

* 일반적으로 어떤 정보에 대하여 제한된 방법으로만 사용됨
    * 예시 : 회계 원장에서 모든 차변을 더하여 대변의 합으로 나누는 것과 같은 오퍼레이션은 적용되지 않음

* 자료구조 정의 : 내부의 정의가 시스템의 다른 부분으로부터 감추어져 있어야 함

* 장점
    1. 결합도를 줄이고 시스템의 유지보수를 쉽게 만듦
    2. 데이터를 관리하는 과정과 데이터를 사용하는 관점을 분리할 수 있음

* 언어 자체의 매커니즘

## 코딩 스타일

* 프로그래밍 스타일
    * 간결하고 읽기 쉬운 코드
    * 문형 구조, 원시 코드의 편집 상태 등에 의하여 가독성이 달라짐
    * 설계에 의하여 좌우됨

* 예시 : PEP8

## 오류 처리

* 잘못된 데이터를 어떻게 처리할 것인가?

## 문서화

* 주석
    * 공개 인터페이스 : 사용을 위하여 정확히 문서화
    * 비공개 인터페이스 : 유지보수 가능하도록 문서화

* 코드와 문서를 일치시켜야 함

* 클래스, 인터페이스, 메소드, 생성자, 필드 정의 옆에 문서화 주석 필요함

## 리팩토링

* 소프트웨어를 보다 쉽게 이해할 수 있고 적응 비용으로 수정할 수 있도록 덭으로 보이는 동작의 변화 없이 내부 구조를 변경하는 것

* 프로그래밍의 가치
    * 당장 수행되어 작업에 도움이 되는 가치
    * 향후 변경이나 필요에 대비한 가치

* 코드 악취
    * 읽기 어려운 프로그램
    * 중복된 로직을 가진 프로그램
    * 실행 중인 코드를 변경해야 하는 특별 동작을 요구하는 프로그램
    * 복잡한 조건이 포함된 프로그램
