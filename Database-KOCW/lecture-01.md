# 관계 대수와 SQL

## 관계 데이터 모델에서 지원되는 두 가지 전형적인 언어

1. 관계 해석(relational calculus)

* 원하는 데이터만 명시하고 질의를 어떻게 수행할 것인가는 명시하지 않는 선언적인 언어

2. 관계 대수(relational algebra)

* 어떻게 질의를 수행할 것인가를 명시하는 절차적 언어
* 관계 대수는 상용 관계 DBMS들에서 널리 사용되는 SQL의 이론적인 기초
* 관계 대수는 SQL을 구현하고 최적화하기 위해 DBMS의 내부 언어로서도 사용됨

## SQL

* 상용 관계 DBMS들의 사실상의 표준 질의어인 SQL을 이해하고 사용할 수 있는 능력은 매우 중요함

* 사용자는 SQL을 사용하여 관계 데이터베이스에 릴레이션을 정의하고, 관계 데이터베이스에서 정보를 검색하고, 관계 데이터베이스를 갱신하며, 여러 가지 무결성 제약조건들을 명시할 수 있음

## 관계 대수

* 기존의 릴레이션들로부터 새로운 릴레이션을 생성함
* 릴레이션이나 관계 대수식(이것의 결과도 릴레이션임)에 연산자들을 적용하여 보다 복잡한 관계 대수식을 점차적으로 만들 수 있음
* 기본적인 연산자들의 집합으로 이루어짐
* 산술 연산자와 유사하게 단일 릴레이션이나 두 개의 릴레이션을 입력으로 받아 하나의 결과 릴레이션을 생성함
* 결과 릴레이션은 또 다른 관계 연산자의 압력으로 사용될 수 있음

![관계 대수 연산자](https://slidesplayer.org/slide/14227945/87/images/6/4.1+관계+대수+%EF%80%AD+ᛞ+%EF%82%B8+%5B표4.1%5D+관계+연산자들의+종류와+표기법+분류+연산자+표기법+필수적인+연산자.jpg)

![관계 대수](https://mblogthumb-phinf.pstatic.net/20130409_105/kookh1_1365509863666KpYHP_PNG/%B0%FC%B0%E8%B4%EB%BC%F62.PNG?type=w2)

### 셀렉션 연산자

* 한 릴레이션에서 셀렉션 조건(selection condition)을 만족하는 튜플들의 부분 집합을 생성함
* 단항 연산자
* 결과 릴레이션의 차수는 입력 릴레이션의 차수와 같음
* 결과 릴레이션의 카디날리티는 항상 원래 릴레이션의 카디날리티보다 작거나 같음
* 셀렉션 조건을 프레디키트(predicate)라고도 함
* 셀렉션 조건은 일반적으로 릴레이션의 임의의 애트리뷰트, 상수, 비교 연산자, 부울 연산자 등을 포함할 수 있음

> EMPLOYEE 릴레이션에서 3번 부서에 소속된 사원들을 검색하라.

### 프로젝션 연산자

* 한 릴레이션의 애트리뷰트들의 부분 집합을 구함
* 결과로 생성되는 릴레이션은 애트리뷰트 리스트에 명시된 애트리뷰트들만 가짐
* 셀렉션의 결과 릴레이션에는 중복 튜플이 존재할 수 없지만 프로젝션 연산의 결과 릴레이션에는 중복 튜플이 존재할 수 있음
    * DBMS에서는 중복 제거가 매우 비싼 작업이기 때문에 필요한 경우에만 중복을 제거하도록 개발됨

> 모든 사원들의 직급을 검색하라.

### 집합 연산자

* 릴레이션이 튜플들의 집합이기 때문에 기존의 집합 연산이 릴레이션에 적용됨
* 3가지 집합 연산자 : 합집합, 교집합, 차집합 연산자
* 집합 연산자의 입력으로 사용되는 2개의 릴레이션은 합집합 호환이어야 함
* 이항 연산자

#### 합집합 호환(union compatible)

* 두 릴레이션 R1, R2가 합집합 호환일 필요충분조건은 R1, R2의 애트리뷰트 수, 순서가 같아야 하고 각 애트리뷰트들의 도메인이 같아야 함

### 합집합 연산자

* 두 릴레이션 R, S의 합집합은 R 또는 S에 있거나 R, S 모두에 속한 튜플들로 이루어진 릴레이션
* 결과 릴레이션에서 중복 튜플들은 제외됨
* 결과 릴레이션의 차수는 R 또는 S의 차수와 같으며 결과 릴레이션의 애트리뷰트 이름들은 R의 애트리뷰트 이름과 같거나 S의 애트리뷰트 이름과 같음

> 홍길동이 속한 부서이거나 개발 부서의 부서번호를 검색하라.

### 차집합 연산자

* 두 릴레이션 R, S의 차집합은 R에는 속하지만 S에는 속하지 않는 튜플들로 이루어진 릴레이션
* 결과 릴레이션의 차수는 R 또는 S의 차수와 같으며, 결과 릴레이션의 애트리뷰트 이름들은 R의 애트리뷰트의 이름과 같거나 S의 애트리뷰트 이름과 같음

> 소속된 직원이 한 명도 없는 부서의 부서번호를 검색하라.

### 카티션 곱 연산자

* 카디날리티 i인 릴레이션 R과 카디날리티가 j인 릴레이션 S의 카티션 곱은 차수가 (R의 차수 + S의 차수)이고 카디날리티가 (i + j)이고 애트리뷰트가 (R의 애트리뷰트 + S의 애트리뷰트)이며 R과 S의 모든 가능한 조합으로 이루어진 릴레이션
* 카티션 곱의 결과 릴레이션의 크기가 매우 클 수 있으며, 사용자가 실제로 원하는 것은 카티션 곱의 결과 릴레이션의 일부인 경우가 대부분이므로 카티션 곱 자체는 유용한 연산자가 아님

### 관계 대수의 완전성

* 셀렉션, 프로젝션, 합집합, 차집합, 카티션 곱은 관계 대수의 필수적인 연산자
* 다른 관계 연산자들은 필수적인 관계 연산자를 두 개 이상 조합하여 표현할 수 있음
* 임의의 질의어가 적어도 필수적인 관계 대수 연산자들만큼의 표현력을 갖고 있으면 관계적으로 완전(relationally complate)하다고 말함
