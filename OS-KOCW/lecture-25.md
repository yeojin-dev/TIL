# File System Implementation 2

## Page Cache and Buffer Cache

### Memory-Mapped I/O

* 메모리 주소 영역과 매핑되어 있기 때문에 파일 입출력에서 시스템 콜을 사용하지 않아도 됨

## 프로그램의 실행

* 파일시스템의 프로그램이 로더에 의해 메모리에 올라와 프로세스가 됨
* 운영체제에 의해 프로세스의 가상 주소공간이 생성됨
* 가상 주소공간에 대해 물리적 메모리를 할당할 때 swap이 발생할 수 있음
    * 여기서 프로그램의 code 영역은 readonly 상태이기 때문에 swap memory 영역에 적재하지 않고 파일의 디스크 주소를 메모리에 바로 매핑시킴(Memory-Mapped I/O)
* 프로세스가 새로운 파일을 사용하고 싶을 때는 OS에 해당 데이터 파일을 자신의 가상 주소공간에 매핑해달라는 시스템 콜을 호출함(Memory-Mapped I/O)
    * 매핑 이후에는 OS를 통하지 않고 파일에 접근할 수 있지만 동시성 문제가 발생할 수 있음
    * 만약 read(), write() 이용한다면 OS가 해당 파일을 복사해서 프로세스의 data 영역에 복사를 해줌 - 동시성 문제 없음
