# System Structure & Program Execution 2

## 동기적 입출력과 비동기적 입출력

### 동기식 입출력

* I/O 요청 후 입출력 작업이 완료된 후에야 제어가 사용자 프로그램에 넘어감

1. 구현 1
    * I/O가 끝날 때까지 CPU를 낭비시킴
    * 매시점 하나의 I/O만 일어날 수 있음

2. 구현 2
    * I/O가 완료될 때까지 해당 프로그램에게서 CPU를 빼앗음
    * I/O 처리를 기다리는 줄에 그 프로그램을 줄 세움
    * 다른 프로그램에게 CPU를 줌

### 비동기식 입출력

* I/O가 시작된 후 입출력 작업이 끝나기를 기다리지 않고 제어가 사용자 프로그램에 즉시 넘어감(CPU를 빼앗기지 않음)
* I/O의 완료는 인터럽트로 알 수 있음(이것은 동기식도 마찬가지)

## DMA(Direct Memory Access)

* 빠른 입출력 장치를 메모리에 가까운 속도로 처리하기 위해 사용
* CPU의 중재 없이 device controller가 device의 buffer storage의 내용을 메모리의 block 단위로 직접 전송
* 바이트 단위가 아니라 block 단위로 인터럽트 발생

## 저장장치 계층 구조

![memory hierarchy](https://static.tvtropes.org/pmwiki/pub/images/memory_hierarchy.jpg)

* 속도, 가격, 휘발성에 따라 계층을 가지고 있음
* primary/secondary: CPU 직접 접근(바이트 단위 접근)이 가능한지에 따라 구분

## 프로그램의 실행(메모리 load)

* 파일 시스템의 실행 파일(프로그램)은 가상 메모리에 적재(프로세스)
* 가상 메모리의 주소 중 필요한 부분만 물리 메모리에 적재되고 나머지 부분은 스왑 메모리에 적재
    * 스왑 메모리는 비휘발성 메모리(하드디스크)에 저장되지만 컴퓨터가 종료되었을 때에는 의미가 없는 메모리
* 논리적 메모리 주소를 물리적 메모리 주소로 바꾸는 address translation 과정이 필요

## 커널 주소 공간의 내용

1. code: 시스템 콜, 인터럽트 처리 루틴, 자원 관리 코드, 기타 유틸리티 코드
2. data: PCB 및 각 하드웨어를 관리하기 위한 자료구조
3. stack: 각 프로세스들의 커널 스택

## 사용자 프로그램이 사용하는 함수

* 사용자 정의 함수
* 라이브러리 함수
* 커널 함수: 다른 함수들은 시스템 콜에 의한 인터럽트를 통해서 커널 함수를 사용함
